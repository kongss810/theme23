{{ 'template-collection.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}

{% if section.settings.image_shape == 'blob' %}
  {{ 'mask-blobs.css' | asset_url | stylesheet_tag }}
{%- endif -%}

{%- unless section.settings.quick_add == 'none' -%}
  {{ 'quick-add.css' | asset_url | stylesheet_tag }}
{%- endunless -%}

{%- if section.settings.quick_add == 'standard' -%}
  <script src="{{ 'quick-add.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

{%- if section.settings.quick_add == 'bulk' -%}
  <script src="{{ 'quick-add-bulk.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'quantity-popover.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'price-per-item.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'quick-order-list.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

<script src="{{ 'quick-add.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
<style>
    #shopify-section-{{section.id}}{

       padding-top:{{section.settings.Desktop_paddingTop}}px;
       padding-bottom:{{section.settings.Desktop_paddingBottom}}px;
     }
     @media(max-width:999px) {
       #shopify-section-{{section.id}}{
           padding-top:{{section.settings.Mobile_paddingTop}}px;
           padding-bottom:{{section.settings.Mobile_paddingBottom}}px;
       }
     }
    #product-grid-ajax {
      --grid-desktop-horizontal-spacing: 20px;
      row-gap: 60px;
      margin-bottom: 0;
    }

    .collection_box {
      padding-bottom: 180px;
      border-bottom: 1px solid rgba(117, 120, 123, 0.40);
    }

    .pagination_lodeMore {
      min-width: 128px;
      height: 37px;
      margin: 0 auto;
      border: unset;
      display: flex;
      width: max-content;
      justify-content: center;
      padding: 0 16px;
      margin-top: 40px;
      color: #fff;
      background: linear-gradient(180deg, #0091DA 34.44%, #003C86 110.81%);
      align-items: center;
    }

  .collection_box  .pagination_list {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 40px;
    gap: 12px;
  }
  .collection_box .pagination-parts {
    display: flex;
    gap: 12px;
    padding: 0 0.3rem;
  }
  .collection_box .pagination-item {
    width: 44px;
    height: 44px;
    display: grid;
    place-content: center;
    line-height: 1;
    transition: all 0.2s ease-in-out;
  }

  .collection_box .pagination .current-page {
    background-color: var(--t_color);
  }
  .collection_box .arrow-link.disabled {
    pointer-events: none;
    opacity: 0.35;
  }
  .collection_box .dot-notation {
    width: auto;
    padding: 0 0.3rem;
  }

  @media only screen and (max-width:767px) {
    .collection_box .wide-parts {
      display: grid;
      grid-template-areas:
        "a a"
        "b c";
    }
    .collection_box .wide-parts .pagination-parts {
      grid-area: a;
    }
   .collection_box  .wide-parts .arrow-link--prev {
      grid-area: b;
      width: 100%;
    }
    .collection_box .collection_box .wide-parts .arrow-link--next {
      grid-area: c;
      width: 100%;
    }

    #product-grid-ajax {
     --grid-mobile-horizontal-spacing: 9px;
      row-gap: 32px;
    }
    .collection  .grid__item {
      width: 50%;
    }
    .collection .grid__item:only-child {
      width: 50%;
      max-width: 50%;
    }

    .collection_box {
      padding-bottom: unset;
      border-bottom: unset;
    }

    .pagination_lodeMore {
      min-width: 117px;
      height: 35px;
      margin: 0 auto;
      border: unset;
      display: flex;
      width: max-content;
      justify-content: center;
      padding: 0 16px;
      margin-top: 32px;
      color: #fff;
      background: linear-gradient(180deg, #0091DA 34.44%, #003C86 110.81%);
      align-items: center;
    }

  }

    @media (min-width: 1000px) and (max-width: 1300px) {
      .grid--4-col-desktop .grid__item {
          width: calc(33.33% - var(--grid-desktop-horizontal-spacing) * 2 / 3);
          max-width: calc(33.33% - var(--grid-desktop-horizontal-spacing) * 2 / 3);
      }
    }
</style>
<div
  id="collection_templateAll"
  class="section-{{ section.id }}-padding gradient color-{{ section.settings.color_scheme }}"
>
  {%- paginate collection.products by section.settings.products_per_page -%}
    {% comment %} Sort is the first tabbable element when filter type is vertical {% endcomment %}
    {%- if section.settings.enable_sorting and section.settings.filter_type == 'vertical' -%}
      <facet-filters-form class="facets facets-vertical-sort page-width">
        <form class="facets-vertical-form" id="FacetSortForm">
          <div class="product-count-vertical" role="status">
            <div class="product-count__text my_h_24 my_m_16 font2">
              {{ 'general.collection.title' | t }}
              <span id="ProductCountDesktop">
                (
                {%- if collection.results_count -%}
                  {{
                    'templates.search.results_with_count'
                    | t: terms: collection.terms, count: collection.results_count
                  }}
                {%- elsif collection.products_count == collection.all_products_count -%}
                  {{ 'products.facets.product_count_simple' | t: count: collection.products_count }}
                {%- else -%}
                  {{
                    'products.facets.product_count'
                    | t: product_count: collection.products_count, count: collection.all_products_count
                  }}
                {%- endif -%}
                )
              </span>
            </div>
            {% comment %} {%- render 'loading-spinner' -%} {% endcomment %}
          </div>
          <div class="facet-filters sorting caption">
            <div class="facet-filters__field">
              <div class="facet-filters__label my_h_20 my_m_12 font2">
                <label for="SortBy">{{ 'products.facets.sort_by_label' | t }}</label>
              </div>
              <div class="select section_button2">
                {%- assign sort_by = collection.sort_by | default: collection.default_sort_by -%}
                <select
                  name="sort_by"
                  class="facet-filters__sort select__select caption-large"
                  id="SortBy"
                  aria-describedby="a11y-refresh-page-message"
                >
                  {%- for option in collection.sort_options -%}
                    <option
                      value="{{ option.value | escape }}"
                      {% if option.value == sort_by %}
                        selected="selected"
                      {% endif %}
                    >
                      {{ option.name | escape }}
                    </option>
                  {%- endfor -%}
                </select>
                <span class="corner-tl"></span>
                <span class="corner-br"></span>
                <span class="svg-wrapper">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M2 6.8125L3.25 5.5625L10.5625 12.9375L17.875 5.5625L19.125 6.8125L10.5625 15.4375L2 6.8125Z" fill="#ffffff"/>
                  </svg>
                </span>
              </div>
            </div>
          </div>
        </form>
      </facet-filters-form>
    {%- endif -%}
    <div class="page-width">
      <div class="collection_box {% if section.settings.filter_type == 'vertical' %} facets-vertical{% endif %}">
        {{ 'component-facets.css' | asset_url | stylesheet_tag }}
        <script src="{{ 'facets.js' | asset_url }}" defer="defer"></script>
        {%- if section.settings.enable_filtering or section.settings.enable_sorting -%}
          <aside
            aria-labelledby="verticalTitle"
            class="facets-wrapper{% unless section.settings.enable_filtering %} facets-wrapper--no-filters{% endunless %}{% if section.settings.filter_type != 'vertical' %} page-width{% endif %}"
            id="main-collection-filters"
            data-id="{{ section.id }}"
          >
            {% render 'facets',
              results: collection,
              enable_filtering: section.settings.enable_filtering,
              enable_sorting: section.settings.enable_sorting,
              filter_type: section.settings.filter_type,
              paginate: paginate
            %}
          </aside>
        {%- endif -%}

        <div
          class="product-grid-container{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
          id="ProductGridContainer"
          {% if settings.animations_reveal_on_scroll %}
            data-cascade
          {% endif %}
        >
          {%- if collection.products.size == 0 -%}
            <div class="collection collection--empty page-width" id="product-grid-ajax" data-id="{{ section.id }}">
              <div class="loading-overlay gradient"></div>
              <div class="title-wrapper center">
                <div class="title title--primary">
                  {{ 'sections.collection_template.empty' | t -}}
                  <br>
                  {{
                    'sections.collection_template.use_fewer_filters_html'
                    | t: link: collection.url, class: 'underlined-link link'
                  }}
                </div>
              </div>
            </div>
          {%- else -%}
            <div
              class="collection{% if section.settings.filter_type != 'vertical' %} page-width{% endif %}"
            >
              <div class="loading-overlay gradient"></div>
              <ul
                id="product-grid-ajax"
                data-id="{{ section.id }}"
                class="
                  grid product-grid grid--2-col-tablet-down
                  grid--4-col-desktop
                "
              >
                {% assign skip_card_product_styles = false %}
                {%- for product in collection.products -%}
                  {% assign lazy_load = false %}
                  {%- if forloop.index > 2 -%}
                    {%- assign lazy_load = true -%}
                  {%- endif -%}
                  <li
                    class="grid__item{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                    {% if settings.animations_reveal_on_scroll %}
                      data-cascade
                      style="--animation-order: {{ forloop.index }};"
                    {% endif %}
                  >
                    {% render 'card-product-new',
                      card_product: product,
                      media_aspect_ratio: section.settings.image_ratio,
                      image_shape: section.settings.image_shape,
                      show_secondary_image: section.settings.show_secondary_image,
                      lazy_load: lazy_load,
                      skip_styles: skip_card_product_styles,
                      show_quick_add: section.settings.show_quick_add,
                      section_id: section.id
                    %}
                  </li>
                  {%- assign skip_card_product_styles = true -%}
                {%- endfor -%}
              </ul>

              <div id="pagination-ajax">
                {%- if paginate.pages > 1 -%}
                  {% render 'pagination2',
                    paginate: paginate,
                    anchor: '',
                    pagination_type: section.settings.pagination_type
                  %}
                {%- endif -%}
              </div>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
  {%- endpaginate -%}
  {% if section.settings.image_shape == 'arch' %}
    {{ 'mask-arch.svg' | inline_asset_content }}
  {%- endif -%}
</div>

{% if section.settings.pagination_type == 'button' or section.settings.pagination_type == 'infinite' %}
  <script type="text/javascript" src="{{ 'infinite-scroll.js' | asset_url }}" defer></script>
{% endif %}
<script>
  $(document).ready(function () {
    var $items = $('.facetsCollection_menuItemBoxPc .facetsCollection_menuItemBox');
    var $items2 = $('.mobile-facets__inner .facetsCollection_menuItemBox');

    $(document).on('click', '.facetsCollection_ItemTitle', function () {
      var $container = $(this).closest('.facetsCollection_menuItemBox, .facets__disclosure-vertical');
      $(this).toggleClass('active');
      $container.find('.facetsCollection_menuItemText').slideToggle();
    });
  });
</script>
{% schema %}
{
  "name": "t:sections.main-collection-product-grid.name",
  "class": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "expand_by_default",
      "label": "expand by default",
      "default": true
    },
    {
      "type": "range",
      "id": "products_per_page",
      "min": 8,
      "max": 36,
      "step": 4,
      "default": 16,
      "label": "t:sections.main-collection-product-grid.settings.products_per_page.label"
    },
    {
      "type": "header",
      "content": "t:sections.main-collection-product-grid.settings.header__3.content"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__1.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__2.label"
        },
        {
          "value": "square",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__3.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.main-collection-product-grid.settings.image_ratio.label"
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "default": false,
      "label": "t:sections.main-collection-product-grid.settings.show_secondary_image.label"
    },
    {
      "type": "checkbox",
      "id": "show_quick_add",
      "label": "show add cart",
      "default": true
    },
    {
      "type": "select",
      "id": "pagination_type",
      "label": "Pagination",
      "default": "default",
      "options": [
        {
          "value": "default",
          "label": "Pages"
        },
        {
          "value": "button",
          "label": "Button"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.main-collection-product-grid.settings.header__1.content"
    },
    {
      "type": "checkbox",
      "id": "enable_filtering",
      "default": true,
      "label": "t:sections.main-collection-product-grid.settings.enable_filtering.label",
      "info": "t:sections.main-collection-product-grid.settings.enable_filtering.info"
    },
    {
      "type": "select",
      "id": "filter_type",
      "options": [
        {
          "value": "vertical",
          "label": "t:sections.main-collection-product-grid.settings.filter_type.options__2.label"
        }
      ],
      "default": "vertical",
      "label": "t:sections.main-collection-product-grid.settings.filter_type.label"
    },
    {
      "type": "checkbox",
      "id": "enable_sorting",
      "default": true,
      "label": "t:sections.main-collection-product-grid.settings.enable_sorting.label"
    },
    {
      "type": "header",
      "content": "Spacing Top:"
    },
    {
      "type": "number",
      "id": "Desktop_paddingTop",
      "label": "Desktop Padding Top",
      "default": 0
    },
    {
      "type": "number",
      "id": "Mobile_paddingTop",
      "label": "Mobile Padding Top",
      "default": 0
    },

    {
      "type": "header",
      "content": "Spacing Bottom:"
    },

    {
      "type": "number",
      "id": "Desktop_paddingBottom",
      "label": "Desktop Padding Bottom",
      "default": 0
    },
    {
      "type": "number",
      "id": "Mobile_paddingBottom",
      "label": "Mobile Padding Bottom",
      "default": 0
    }
  ]
}
{% endschema %}
